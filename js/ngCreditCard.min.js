// nGCreditCard, an Angular module that provides one directive to capture credit card input
// For help on getting started, look in the example folder
"use strict";angular.module("ngCreditCard",[]).controller("CardController",["$scope",function(e){e.updateNumber=function(){for(var c=angular.copy(e.card).split(""),r=1;4>r;r++)4*r+r-1<c.length&&" "!=c[4*r+r-1]&&c.splice(4*r+r-1,0," ");e.card=c.slice(0,19).join("");var a=e.card.substring(0,2),d=(e.card.substring(0,3),e.card.substring(0,4));e.cc_name="4"==e.card.substring(0,1)?"visa":"51"==a||"52"==a||"53"==a||"54"==a||"55"==a?"mastercard":"34"==a||"37"==a?"americanexpress":"6011"==d?"discover":""}}]).directive("ngCreditCard",function(){return{require:[],restrict:"E",controller:"CardController",scope:{card:"=card",cvc:"=cvc",cardHolderName:"=cardHolderName",expMonth:"=expMonth",expYear:"=expYear"},template:"<div class='creditcard' ng-class='cc_name'><img src='../img/creditcard/visa.png' ng-show=\"cc_name && cc_name == 'visa'\" class='creditcard-logo visa' /><img src='../img/creditcard/mastercard.png' ng-show=\"cc_name && cc_name == 'mastercard'\" class='creditcard-logo mastercard' /><img src='../img/creditcard/americanexpress.png' ng-show=\"cc_name && cc_name == 'americanexpress'\" class='creditcard-logo americanexpress' /><img src='../img/creditcard/discover.png' ng-show=\"cc_name && cc_name == 'discover'\" class='creditcard-logo discover' /><input ng-model='card' ng-change='updateNumber()' class='creditcard-number' type='text' placeholder='&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;' maxlength='19' /><input ng-model='cvc' class='creditcard-cvc' type='text' placeholder='CVC' maxlength='4' /><input ng-model='cardHolderName' class='creditcard-name' type='text' placeholder='John Smith' /><input ng-model='expMonth' class='creditcard-exp-month' type='text' placeholder='MM' /><input ng-model='expYear' class='creditcard-exp-year' type='text' placeholder='YYYY' maxlength='4' /></div>"}});

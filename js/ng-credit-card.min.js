// nGCreditCard, an Angular module that provides one directive to capture credit card input
// For help on getting started, look in the example folder
"use strict";angular.module("ngCreditCard",[]).controller("CardController",["$scope",function(e){e.dir="/"!=e.imageDirectory[e.imageDirectory.length-1]?e.imageDirectory+"/":e.imageDirectory,e.updateNumber=function(){if(e.card){e.card=e.card.trim();for(var r=angular.copy(e.card).split(""),c=1;4>c;c++)4*c+c-1<r.length&&" "!=r[4*c+c-1]&&r.splice(4*c+c-1,0," ");e.card=r.slice(0,19).join("");var a=e.card.substring(0,2),n=(e.card.substring(0,3),e.card.substring(0,4));e.cc_name="4"==e.card.substring(0,1)?"visa":"51"==a||"52"==a||"53"==a||"54"==a||"55"==a?"mastercard":"34"==a||"37"==a?"americanexpress":"6011"==n?"discover":""}else e.cc_name=""}}]).directive("ngCreditCard",function(){return{require:[],restrict:"E",controller:"CardController",scope:{card:"=card",cvc:"=cvc",cardHolderName:"=cardHolderName",expMonth:"=expMonth",expYear:"=expYear",imageDirectory:"@imageDirectory"},template:"<div class='creditcard' ng-class='cc_name'><img ng-src='{{dir}}visa.png' ng-show=\"cc_name && cc_name == 'visa'\" class='creditcard-logo visa' /><img ng-src='{{dir}}mastercard.png' ng-show=\"cc_name && cc_name == 'mastercard'\" class='creditcard-logo mastercard' /><img ng-src='{{dir}}americanexpress.png' ng-show=\"cc_name && cc_name == 'americanexpress'\" class='creditcard-logo americanexpress' /><img ng-src='{{dir}}discover.png' ng-show=\"cc_name && cc_name == 'discover'\" class='creditcard-logo discover' /><input ng-model='card' name='cc_card' ng-change='updateNumber()' class='creditcard-number' type='text' placeholder='&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;&#9679;&#9679;&#9679;&#9679;&nbsp;' maxlength='19' ng-model-options='{allowInvalid: true}' ng-trim='false' required /><input ng-model='cvc' name='cc_cvc' class='creditcard-cvc' type='number' placeholder='CVC' maxlength='4' /><input ng-model='cardHolderName' name='cc_name' class='creditcard-name' type='text' placeholder='John Smith' required /><input ng-model='expMonth' name='cc_month' class='creditcard-exp-month' type='number' placeholder='MM' min='0' max='12' maxlength='2' required /><input ng-model='expYear' name='cc_year' class='creditcard-exp-year' type='number' placeholder='YYYY' maxlength='4' required /></div>"}});
